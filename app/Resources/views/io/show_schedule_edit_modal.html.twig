{#{% extends 'base.html.twig' %}#}

{#{% block title %}Plan zajęć - edycja{% endblock %}#}
{#{% block body %}#}
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="editModalLabel">Timetable edit</h4>
        </div>
        <div class="modal-body">
            {#{{ render(controller('AppBundle:ShowSchedule:edit', {'id': '16'})) }}#}
            {% if form is defined %}
                {{ form_start(form) }}
                {{ form_widget(form) }}
                {{ form_end(form) }}
            {% endif %}
            <script type="application/javascript">
                $("#editFormAjax").submit(function(e){
                    e.preventDefault();

                    $.ajax({
                        type: $(this).attr('method'),
                        url: $(this).attr('action'),
                        data: $(this).serialize()
                    })
                            .done(function (data) {
//                                if (typeof data.message !== 'undefined') {
//                                    alert(data.message);
//                                }
                                $('#editmodal').modal('hide');
                                $("#message").fadeOut();
                                $('#calendar').weekCalendar('refresh');
                            })
                            .fail(function (jqXHR, textStatus, errorThrown) {
//                                if (typeof jqXHR.responseJSON !== 'undefined') {
//                                    if (jqXHR.responseJSON.hasOwnProperty('form')) {
//                                        $('#form_body').html(jqXHR.responseJSON.form);
//                                    }
//
//                                    $('.form_error').html(jqXHR.responseJSON.message);
//
//                                } else {
                                    alert(errorThrown);
//                                }

                            });
                    });
            </script>
        </div>
    </div>
</div>



{#{% endblock %}#}
